<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Multi Curve 2</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
    Example from <a href="http://amzn.com/1430236655?tag=html5anim-20"><em>Foundation HTML5 Animation with JavaScript</em></a>
</header>
<canvas id="canvas" width="400" height="400"></canvas>
<aside>Refresh page for random curves.</aside>
<script type="text/javascript" src="shapes.js"></script>
<script type="text/javascript" src="util.js"></script>
<script>
    window.onload = function () {
        var canvas = document.getElementById('canvas'),
                context = canvas.getContext('2d'),
                points = [],
                numPoints = 9,
                ctrlPoint = {};

        for (var i = 0; i < numPoints; i++) {
            var temp_ball = new Ball(5, get_random_color(), Math.random()*canvas.width, Math.random()*canvas.height);
            points.push(temp_ball);
        }

        //move to the first point
        context.beginPath();
        context.moveTo(points[0].x, points[0].y);
        //curve through the rest, stopping at each midpoint
        for (i = 1; i < numPoints - 2; i++) {
            ctrlPoint.x = (points[i].x + points[i+1].x) / 2;
            ctrlPoint.y = (points[i].y + points[i+1].y) / 2;
            //points[i].x = points[i].x * 2 - (points[i-1].x + ctrlPoint.x) / 2;
            //points[i].y = points[i].y * 2 - (points[i-1].y + ctrlPoint.y) / 2;
            context.quadraticCurveTo(points[i].x, points[i].y,
                    ctrlPoint.x, ctrlPoint.y);
        }

        //curve through the last two points
        //context.quadraticCurveTo(points[i].x, points[i].y,
                //points[i+1].x, points[i+1].y);
        context.stroke();
        points.forEach(function(ball){
            ball.draw(context);
        });
    };
</script>
</body>
</html>